---
title: "GitHub Actionã§GitHub Organizationå†…ã«ã‚ã‚‹ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã®Releaseã‚’å–å¾—ã™ã‚‹"
emoji: "ğŸ”–"
type: "tech"
topics: ["githubactions","github"]
published: true
---

## ã¯ã˜ã‚ã«

GitHub Organizationã§ç®¡ç†ã—ã¦ã„ã‚‹ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã€ã“ã‚Œã‚’Releaseãƒšãƒ¼ã‚¸ã‚’ä½¿ã£ã¦åˆ¥ãƒªãƒã‚¸ãƒˆãƒªã®GitHub Actionå†…ã§ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®æ‰‹é †ã‚’ã¾ã¨ã‚ã¾ã™ã€‚

## GitHub Appã®ä½œæˆ

GitHub Appã®ä½œã‚Šæ–¹ã¯ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«å€£ã£ã¦ãã ã•ã„ã€‚

<https://docs.github.com/en/apps/creating-github-apps/registering-a-github-app/registering-a-github-app>

**Repository Permissions**ã§Releaseãƒšãƒ¼ã‚¸ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãŸã‚ã®æ¨©é™ã‚’æœ‰åŠ¹åŒ–ã—ã¾ã™ã€‚  
**Contents**ã‚’**Read-only**ã«è¨­å®šã—ã¦ãã ã•ã„ã€‚(è‡ªå‹•çš„ã«**Metadata**ã‚‚**Read-only**ã«ãªã‚Šã¾ã™)

![](/images/3d7d556d55fc22/new-github-app-permission.png)

## private keyã®ä½œæˆ

ä½œæˆã—ãŸGitHub Appã®ãƒšãƒ¼ã‚¸ã‹ã‚‰ã€**Generate a private key**ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦private keyã‚’ä½œæˆã—ã¾ã™ã€‚

## Install GitHub App

ä½œæˆã—ãŸGitHub Appã‚’ãƒªãƒã‚¸ãƒˆãƒªã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

**Only select repositories**ã‚’é¸æŠã—ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¯¾è±¡ã®ãƒªãƒã‚¸ãƒˆãƒªã¨ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®2ã¤ã‚’é¸æŠã—ã¾ã™ã€‚

## Repository secrets

ä½œæˆã—ãŸGitHub Appã®ãƒšãƒ¼ã‚¸ã«ã‚ã‚‹**App ID**ã¨ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸprivate keyã‚’ä½¿ã£ã¦ã€ä»¥ä¸‹2ã¤ã®**Repository secret**ã‚’è¨­å®šã—ã¾ã™ã€‚

- `APP_ID`
- `APP_PRIVATE_KEY`

## GitHub Action

`.github/workflows`ã«ä»»æ„ã®åå‰ã®Workflowãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã—ã€ä»¥ä¸‹ã®ã‚ˆã†ã«GitHub Appsã«ã‚ˆã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ã®ç™ºè¡Œãƒ»Releaseãƒšãƒ¼ã‚¸ã‹ã‚‰ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚

`actions/create-github-app-token`ã®`owner`ã¨`repositories`ã‚’è¨­å®šã—ãªã„ã¨ã€Releaseãƒšãƒ¼ã‚¸ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹æ¨©é™ãŒã‚ã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ãŒç™ºè¡Œã•ã‚Œãªã„ã®ã§ã”æ³¨æ„ãã ã•ã„ã€‚

Releaseãƒšãƒ¼ã‚¸ã‹ã‚‰ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¯<https://github.com/dsaltares/fetch-gh-release-asset>ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚

```yaml
name: do something

on:
  pull_request:
    types:
      - opened
      - synchronize

jobs:
  do-something:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - uses: actions/checkout@v4
        with:
          ref: ${{ github.event.pull_request.head.sha }}

      - name: Generate a token
        id: generate_token
        uses: actions/create-github-app-token@v1
        with:
          app-id: ${{ secrets.APP_ID }}
          private-key: ${{ secrets.APP_PRIVATE_KEY }}
          owner: ${{ github.repository_owner }}
          repositories: "something-a,something-b" # ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¯¾è±¡ã®ãƒªãƒã‚¸ãƒˆãƒªã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚’è¡Œã†ãƒªãƒã‚¸ãƒˆãƒªã‚’å…¥åŠ›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™

      - name: Download latest binary
        uses: dsaltares/fetch-gh-release-asset@1.1.1
        with:
          repo: org/repo # ä»»æ„ã®çµ„ç¹”/ãƒªãƒã‚¸ãƒˆãƒªå
          version: latest
          file: something_Linux_x86_64.tar.gz # ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«å
          token: ${{ steps.generate_token.outputs.token }}

      - name: Extract file
        run: tar -xvf something_Linux_x86_64.tar.gz
```
